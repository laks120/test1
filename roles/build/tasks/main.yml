---
- name: Clone the project repository
  ansible.builtin.git:
    repo: "https://github.com/javajack/spring-boot-jar-war-demo.git"
    dest: "/opt/spring-boot-demo"
    update: yes

- name: Build the project
  ansible.builtin.command:
    cmd: "./mvnw clean package"
    chdir: "/opt/spring-boot-demo"

- name: Archive the JAR file
  ansible.builtin.archive:
    path: "/opt/spring-boot-demo/target/spring-boot-jar-war-demo-0.0.1-SNAPSHOT.jar"
    dest: "/tmp/spring-boot-demo.jar"
    format: gz
